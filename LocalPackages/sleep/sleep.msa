# Sleep command - currently disabled

/*

obsidian.admin:/sleep = >>>
  @world = pworld()
  if (@world != 'world') {
    die(colorize('&cYou can only sleep in the overworld!'))
  }

  @time = get_world_time()
  if (@time < 12541 || @time >23458) {
    die(colorize('&cYou can only sleep at night!'))
  }

  @player = player()
  @prefix = _player_prefix(@player)
  broadcast(colorize('&6SLEEP: '.@prefix.@player.' has initiated server sleep in 10 seconds'))
  broadcast(colorize('&aUse /nosleep to cancel'))
  store_value('sleepOK', true)

  set_timeout(10000, closure(
    if (get_value('sleepOK')) {
      set_world_time('world', 23000)
      broadcast(colorize('&6SLEEP: sleep successful!'))
    }
    clear_value('sleepOK')
  ))
<<<

obsidian.admin:/nosleep = >>>
  if (get_value('sleepOK')) {
    clear_value('sleepOK')
    @player = player()
    @prefix = _player_prefix(@player)
    broadcast(colorize('&6SLEEP: '.@prefix.@player.' cancelled server sleep'))
  } else {
    msg(colorize('&cThere is no pending sleep request!'))
  }
<<<

*/
